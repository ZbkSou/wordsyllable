# 前端项目使用指南

## 📚 项目概述

这是单词记忆助手的前端应用，提供了完整的用户界面来管理和学习单词。

---

## 🎯 核心功能

### 1. 用户认证
- ✅ 用户注册
- ✅ 用户登录
- ✅ JWT Token 自动管理
- ✅ 登录状态持久化

### 2. 单词管理
- ✅ **AI 自动获取模式**：输入单词，AI 自动获取音标、翻译和音节
- ✅ **手动添加模式**：完全自定义单词的所有信息
- ✅ **搜索功能**：快速查找已添加的单词
- ✅ **列表浏览**：分页查看所有单词
- ✅ **实时刷新**：添加单词后自动更新列表

### 3. 统计分析
- ✅ **统计概览**：总体数据一览
- ✅ **单词排行**：查询次数最多的单词（前10）
- ✅ **音节排行**：查询次数最多的音节（前10）
- ✅ **多维度统计**：包括查询总次数、唯一单词数等

### 4. 用户体验
- ✅ **响应式设计**：完美支持手机、平板、桌面端
- ✅ **深色模式**：自动跟随系统主题
- ✅ **流畅动画**：优雅的过渡效果
- ✅ **友好提示**：清晰的错误和成功消息

---

## 🚀 快速开始

### 方法一：一键启动（推荐）

**Windows 用户：**
```bash
# 在项目根目录（11wordsyllable/）双击运行
启动完整项目.bat
```

这个脚本会：
1. ✅ 自动启动后端 API 服务器（端口 5000）
2. ✅ 自动启动前端 Web 应用（端口 3000）
3. ✅ 自动检查并安装依赖
4. ✅ 自动创建配置文件

**Linux/Mac 用户：**
```bash
# 在项目根目录
chmod +x 启动完整项目.sh
./启动完整项目.sh
```

### 方法二：单独启动前端

```bash
# 进入前端目录
cd word-next

# Windows 用户
启动前端.bat

# Linux/Mac 用户
chmod +x 启动前端.sh
./启动前端.sh

# 或者手动启动
npm install
npm run dev
```

⚠️ **注意**：单独启动前端前，请确保后端 API 已经在运行！

### 访问应用

启动成功后，在浏览器中访问：
- 🌐 **前端应用**: [http://localhost:3000](http://localhost:3000)
- 🔌 **后端API**: [http://localhost:5000](http://localhost:5000)

---

## 📖 使用教程

### 第一步：注册账号

1. 打开浏览器访问 [http://localhost:3000](http://localhost:3000)
2. 点击"没有账号？立即注册"
3. 填写用户名、邮箱和密码
4. 点击"注册"按钮
5. 注册成功后会自动登录

### 第二步：添加单词

#### 📋 使用 JSON 模式（最快捷）⭐ 新功能

1. 在主页面点击"添加单词"标签
2. 选择"📋 JSON"模式
3. 粘贴 JSON 格式的单词数据
4. 点击"解析并添加单词"按钮

**支持两种 JSON 格式**：

**格式 1 - AI 自动模式**（只需 word 字段）：
```json
{
  "word": "conversation"
}
```

**格式 2 - 手动模式**（完整字段）：
```json
{
  "word": "conversation",
  "syllables": ["con", "ver", "sa", "tion"],
  "translation": "会话，谈话",
  "phonetic": "/ˌkɒnvəˈseɪʃən/"
}
```

**优点**：
- ✅ 支持复制粘贴，快速添加
- ✅ 自动识别 AI 或手动模式
- ✅ 适合批量导入
- ✅ 可与其他系统集成
- ✅ phonetic 字段可选

**适用场景**：
- 从文档或其他工具复制单词数据
- API 返回的 JSON 数据
- 批量快速添加单词
- 程序化处理单词数据

#### 🤖 使用 AI 自动获取（推荐）

1. 在主页面点击"➕ 添加单词"标签
2. 选择"🤖 AI自动获取"模式
3. 输入单词，例如：`conversation`
4. 点击"添加单词"按钮
5. 等待几秒，AI 会自动获取：
   - 音标：/ˌkɒnvəˈseɪʃən/
   - 翻译：会话，谈话
   - 音节：con · ver · sa · tion

**优点**：
- ✅ 无需查字典
- ✅ 音标准确
- ✅ 音节划分专业
- ✅ 操作简单

**适用场景**：
- 学习新单词
- 不确定音节划分
- 需要标准发音

#### ✏️ 使用手动添加

1. 在主页面点击"➕ 添加单词"标签
2. 选择"✏️ 手动添加"模式
3. 填写单词信息：
   - **单词**（必填）：例如 `conversation`
   - **音节**（必填）：用空格或逗号分隔，例如 `con ver sa tion`
   - **翻译**（必填）：例如 `会话，谈话`
   - **音标**（可选）：例如 `/ˌkɒnvəˈseɪʃən/`
4. 点击"添加单词"按钮

**优点**：
- ✅ 完全控制
- ✅ 速度更快
- ✅ 不依赖网络
- ✅ 可自定义

**适用场景**：
- 批量导入单词
- 网络不稳定
- 已有整理好的单词表
- 特殊词汇

### 第三步：查看和搜索单词

1. 点击"📖 单词列表"标签
2. 在搜索框中输入单词，点击"搜索"
3. 搜索结果会高亮显示
4. 向下滚动查看所有单词
5. 使用"上一页"/"下一页"按钮浏览

### 第四步：查看统计数据

1. 点击"📊 统计数据"标签
2. 查看三个分类：
   - **概览**：总体数据，包括查询次数、单词数等
   - **单词统计**：查询次数最多的单词排行榜
   - **音节统计**：查询次数最多的音节排行榜
3. 点击"刷新"按钮更新数据

---

## 🎨 界面说明

### 顶部导航栏
```
📚 单词记忆助手          欢迎, [用户名] [退出登录]
```
- 左侧：应用标题
- 右侧：显示当前用户，可点击"退出登录"

### 功能标签页
```
[ ➕ 添加单词 ] [ 📖 单词列表 ] [ 📊 统计数据 ]
```
- 点击切换不同功能
- 当前激活的标签会高亮显示

### 添加单词页面
```
┌─────────────────────────────────┐
│ 添加单词                         │
├─────────────────────────────────┤
│ [ 🤖 AI自动获取 ] [ ✏️ 手动添加 ]│
├─────────────────────────────────┤
│ 输入单词：                       │
│ [___________________________]   │
│                                  │
│ [      添加单词      ]          │
└─────────────────────────────────┘
```

### 单词列表页面
```
┌─────────────────────────────────┐
│ [ 搜索框___________ ] [ 搜索 ]  │
├─────────────────────────────────┤
│ ┌─────────────────────────────┐ │
│ │ conversation                 │ │
│ │ /ˌkɒnvəˈseɪʃən/             │ │
│ │ 会话，谈话                   │ │
│ │ [con] [ver] [sa] [tion]     │ │
│ └─────────────────────────────┘ │
├─────────────────────────────────┤
│ [ 上一页 ] 第 1/5 页 [ 下一页 ] │
└─────────────────────────────────┘
```

### 统计数据页面
```
┌─────────────────────────────────┐
│ [ 概览 ] [ 单词统计 ] [ 音节统计 ]│
├─────────────────────────────────┤
│ 📊 单词查询总次数: 150          │
│ 📖 查询过的单词数: 45           │
│ 🔤 音节查询总次数: 600          │
│ 🎵 查询过的音节数: 120          │
│ 📚 系统总单词数: 500            │
│ 🔠 系统总音节数: 800            │
└─────────────────────────────────┘
```

---

## 🛠️ 技术细节

### 技术栈
- **框架**: Next.js 16.0.0 (App Router)
- **UI 库**: React 19.2.0
- **语言**: TypeScript 5
- **样式**: Tailwind CSS 4
- **HTTP**: Axios
- **认证**: JWT Token

### 项目结构
```
word-next/
├── app/
│   ├── layout.tsx          # 根布局
│   ├── page.tsx            # 主页面（所有功能）
│   ├── globals.css         # 全局样式
│   └── favicon.ico         # 网站图标
├── components/
│   ├── AuthForm.tsx        # 认证表单（登录/注册）
│   ├── AddWord.tsx         # 添加单词组件
│   ├── WordList.tsx        # 单词列表组件
│   └── Statistics.tsx      # 统计数据组件
├── lib/
│   └── api.ts              # API 接口封装
├── public/                 # 静态资源
├── .env.local              # 环境变量（需创建）
├── package.json            # 项目依赖
├── tsconfig.json           # TypeScript 配置
├── README.md               # 英文文档
├── README-CN.md            # 中文详细文档
├── 启动前端.bat            # Windows 启动脚本
└── 启动前端.sh             # Linux/Mac 启动脚本
```

### API 接口封装

所有 API 接口已在 `lib/api.ts` 中封装，包括：

#### 认证接口
```typescript
authAPI.register(data)  // 注册
authAPI.login(data)     // 登录
authAPI.getMe()         // 获取当前用户
```

#### 单词接口
```typescript
wordsAPI.addWord(data)        // 添加单词
wordsAPI.getWords(page, size) // 获取列表
wordsAPI.searchWord(word)     // 搜索单词
wordsAPI.getWordById(id)      // 获取详情
```

#### 统计接口
```typescript
statsAPI.getOverview()         // 获取概览
statsAPI.getWordStats(limit)   // 单词统计
statsAPI.getSyllableStats(limit) // 音节统计
```

### 自动认证机制

前端实现了自动认证机制：
1. **登录时**：Token 保存到 localStorage
2. **请求时**：自动在 Header 添加 `Authorization: Bearer <token>`
3. **过期时**：自动清除 Token 并跳转登录页
4. **刷新时**：自动从 localStorage 恢复登录状态

---

## 🔧 配置说明

### 环境变量

在 `word-next/` 目录创建 `.env.local` 文件：

```env
# 后端 API 地址
NEXT_PUBLIC_API_URL=http://localhost:5000/api
```

**配置说明**：
- `NEXT_PUBLIC_API_URL`：后端 API 的基础地址
- 开发环境：`http://localhost:5000/api`
- 生产环境：替换为实际的服务器地址

⚠️ **注意**：所有以 `NEXT_PUBLIC_` 开头的变量会被暴露到浏览器端。

### 修改端口

**修改前端端口**（默认 3000）：

```bash
# Windows
set PORT=3001 && npm run dev

# Linux/Mac
PORT=3001 npm run dev
```

或修改 `package.json`：
```json
{
  "scripts": {
    "dev": "next dev -p 3001"
  }
}
```

**修改后端端口**（默认 5000）：

编辑项目根目录的 `.env` 文件：
```env
FLASK_PORT=5001
```

同时更新前端的 `.env.local`：
```env
NEXT_PUBLIC_API_URL=http://localhost:5001/api
```

---

## ❓ 常见问题

### 1. 无法连接后端 API

**症状**：页面显示网络错误，无法添加单词

**解决方案**：
1. 确保后端服务已启动：
   ```bash
   # 在项目根目录运行
   启动服务器.bat  # Windows
   # 或
   python start_server.py  # Linux/Mac
   ```
2. 检查后端是否在运行：访问 http://localhost:5000/api/health
3. 检查 `.env.local` 中的 API 地址是否正确
4. 检查防火墙是否阻止了连接

### 2. AI 自动获取失败

**症状**：添加单词时提示"AI 自动获取失败"

**原因**：
- 后端未配置 `DEEPSEEK_API_KEY`
- Deepseek API 调用失败
- 网络连接问题

**解决方案**：
1. 检查后端 `.env` 文件中的 `DEEPSEEK_API_KEY`
2. 切换到"手动添加"模式
3. 检查网络连接

### 3. 登录状态丢失

**症状**：刷新页面后需要重新登录

**原因**：
- 浏览器禁用了 localStorage
- Token 已过期
- 浏览器清理了缓存

**解决方案**：
1. 检查浏览器设置，确保启用了 localStorage
2. 重新登录获取新的 Token
3. 不要使用隐私模式

### 4. 样式显示异常

**症状**：页面样式错乱或不显示

**解决方案**：
```bash
# 清除缓存并重新安装
cd word-next
rm -rf node_modules .next
npm install
npm run dev
```

### 5. npm install 失败

**症状**：安装依赖时报错

**解决方案**：
```bash
# 清除 npm 缓存
npm cache clean --force

# 使用国内镜像（如果在中国）
npm config set registry https://registry.npmmirror.com

# 重新安装
npm install
```

### 6. 端口被占用

**症状**：启动时提示端口已被使用

**解决方案**：
```bash
# Windows：查找占用端口的进程
netstat -ano | findstr :3000
taskkill /PID <进程ID> /F

# Linux/Mac：查找并结束进程
lsof -ti:3000 | xargs kill -9

# 或者使用其他端口
PORT=3001 npm run dev
```

---

## 🎯 使用技巧

### 1. 批量添加单词

虽然界面暂不支持批量导入，但可以：
1. 使用"手动添加"模式
2. 逐个快速添加（自动刷新列表）
3. 音节用空格分隔，快速输入

### 2. 快速搜索

1. 使用单词列表的搜索功能
2. 搜索支持部分匹配
3. 点击"清除"返回完整列表

### 3. 深色模式

应用会自动跟随系统主题：
- Windows：设置 → 个性化 → 颜色
- Mac：系统偏好设置 → 通用 → 外观
- 自动切换，无需手动设置

### 4. 移动端使用

1. 在手机浏览器访问 `http://你的电脑IP:3000`
2. 确保手机和电脑在同一网络
3. 界面会自动适配移动端

---

## 🚀 生产部署

### 构建生产版本

```bash
cd word-next
npm run build
npm start
```

### 部署到服务器

1. **使用 Vercel（推荐）**：
   ```bash
   # 安装 Vercel CLI
   npm i -g vercel
   
   # 部署
   vercel
   ```

2. **使用 Nginx**：
   ```bash
   # 构建
   npm run build
   
   # 配置 Nginx 反向代理
   # 指向 http://localhost:3000
   ```

3. **使用 Docker**：
   ```dockerfile
   FROM node:20-alpine
   WORKDIR /app
   COPY package*.json ./
   RUN npm install
   COPY . .
   RUN npm run build
   CMD ["npm", "start"]
   ```

### 环境变量配置

生产环境记得修改 `.env.local`：
```env
NEXT_PUBLIC_API_URL=https://your-api-domain.com/api
```

---

## 📞 获取帮助

如果遇到问题：
1. 查看本文档的"常见问题"部分
2. 查看 `README-CN.md` 获取更多技术细节
3. 查看后端 API 文档（项目根目录 `README.md`）
4. 提交 Issue 到项目仓库

---

## 📝 更新日志

### v1.0.0 (2025-01-23)
- ✅ 完成前端基础架构
- ✅ 实现用户认证功能
- ✅ 实现单词管理功能（AI自动 + 手动）
- ✅ 实现统计数据展示
- ✅ 响应式设计
- ✅ 深色模式支持

---

## 🎉 结语

感谢使用单词记忆助手！希望这个工具能帮助你更好地学习和记忆英语单词。

如果你觉得这个项目有用，欢迎：
- ⭐ Star 项目
- 🐛 报告 Bug
- 💡 提出新功能建议
- 🤝 贡献代码

祝学习愉快！📚✨

